schemaVersion: 2.0.0
components:
  - name: dev
    container:
      image: public.ecr.aws/aws-mde/universal-image:latest
commands:
  - id: install
    exec:
      component: dev
      commandLine: "apt-get update && apt-get install -y build-essential pkg-config default-libmysqlclient-dev && pip install -r m_control/requirements.txt"
  - id: build
    exec:
      component: dev
      commandLine: "mkdir -p m_control/assets m_control/config && if [ ! -f m_control/config/database_config.json ]; then cp m_control/config.json m_control/config/database_config.json; fi"
  - id: test
    exec:
      component: dev
      commandLine: "python3 -c 'import streamlit; import pandas; import mysql.connector; import sqlalchemy; print(\"All dependencies imported successfully\")'"